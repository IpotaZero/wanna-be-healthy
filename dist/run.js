const b="modulepreload",g=function(s,e){return new URL(s,e).href},w={},E=function(e,t,o){let n=Promise.resolve();if(t&&t.length>0){let v=function(i){return Promise.all(i.map(l=>Promise.resolve(l).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};const a=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),m=r?.nonce||r?.getAttribute("nonce");n=v(t.map(i=>{if(i=g(i,o),i in w)return;w[i]=!0;const l=i.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!o)for(let h=a.length-1;h>=0;h--){const f=a[h];if(f.href===i&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":b,l||(d.as="script"),d.crossOrigin="",d.href=i,m&&d.setAttribute("nonce",m),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function c(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return n.then(a=>{for(const r of a||[])r.status==="rejected"&&c(r.reason);return e().catch(c)})};class p{static fadeOut(e){return e.style.transition="opacity 0.2s",e.style.opacity="0",e.style.pointerEvents="none",this.sleep(200)}static async fadeIn(e){e.style.transition="opacity 0.2s",e.style.opacity="1",await this.sleep(200),e.style.pointerEvents="all"}static sleep(e){return new Promise(t=>{setTimeout(t,e)})}}class S{static#e;static init(e){this.#e=e}static async goto(e,{showLoading:t=this.#s,hideLoading:o=this.#t}={}){this.#e.end();const n=document.getElementById("container");await p.fadeOut(n);let c=!1,a=!1;p.sleep(1e3).then(()=>{c||(t(),a=!0)}),this.#e=e(),await this.#e.ready,c=!0,a&&o(),await p.fadeIn(n)}static#s(){const e=document.createElement("p");e.textContent="Loading...",e.classList.add("loading"),document.body.appendChild(e)}static#t(){document.querySelectorAll(".loading").forEach(e=>e.remove())}}class y{static isAvailable=!0;static keyboard={pressed:new Set,longPressed:new Set,pushed:new Set,upped:new Set};static mouse={position:{x:0,y:0},clicked:new Set,upped:new Set,down:new Set,about:new Set};static focusState={isFocused:!0,justFocused:!1,justBlurred:!1};static#e=!1;static init(){if(this.#e)throw new Error("Input is already initialized!");this.#e=!0,document.addEventListener("contextmenu",e=>(e.preventDefault(),e.stopPropagation(),!1)),document.addEventListener("keydown",e=>{if(e.code==="Tab")return e.preventDefault(),e.stopPropagation(),!1}),document.addEventListener("pointerdown",this.#i.bind(this),{passive:!1}),document.addEventListener("pointermove",this.#r.bind(this),{passive:!1}),document.addEventListener("pointerleave",this.#n.bind(this),{passive:!1}),document.addEventListener("pointercancel",this.#n.bind(this),{passive:!1}),document.addEventListener("keydown",this.#s.bind(this)),document.addEventListener("keyup",this.#t.bind(this)),window.addEventListener("blur",this.#a.bind(this)),window.addEventListener("focus",this.#o.bind(this)),document.addEventListener("visibilitychange",this.#l.bind(this))}static update(){this.#e||console.error("Input is not initialized!"),this.keyboard.longPressed.clear(),this.keyboard.pushed.clear(),this.keyboard.upped.clear(),this.mouse.clicked.clear(),this.mouse.upped.clear(),this.focusState.justFocused=!1,this.focusState.justBlurred=!1,this.isAvailable||(this.mouse.down.clear(),this.keyboard.pressed.clear())}static#s(e){this.isAvailable&&(this.keyboard.pressed.has(e.code)||this.keyboard.pushed.add(e.code),this.keyboard.pressed.add(e.code),this.keyboard.longPressed.add(e.code))}static#t(e){this.isAvailable&&(this.keyboard.pressed.delete(e.code),this.keyboard.upped.add(e.code))}static#i(e){this.isAvailable&&(this.mouse.down.add("left"),this.mouse.clicked.add("left"),this.#d())}static#r(e){this.isAvailable}static#n(e){this.isAvailable&&(this.mouse.down.delete("left"),this.mouse.upped.add("left"))}static#d(){this.mouse.about.clear();const{x:e,y:t}=this.mouse.position,o=window.innerWidth,n=window.innerHeight;e<o/3?this.mouse.about.add("left"):e>o*2/3&&this.mouse.about.add("right"),t<n/3?this.mouse.about.add("up"):t>n*2/3&&this.mouse.about.add("down"),e>=o/3&&e<=o*2/3&&t>=n/3&&t<=n*2/3&&this.mouse.about.add("center")}static#a(){console.log("よそ見するにゃ!"),this.focusState.isFocused=!1,this.focusState.justBlurred=!0}static#o(){console.log("こっち見んにゃ!"),this.focusState.isFocused=!0,this.focusState.justFocused=!0}static#l(){document.visibilityState==="visible"?this.#o():this.#a()}}(s=>{s.mouseButtons=["left","middle","right","back","forward"],s.keys=["KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Escape","Backspace","Tab","Space","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight","CapsLock","NumLock","ScrollLock","Insert","Delete","Home","End","PageUp","PageDown","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ContextMenu","Pause","PrintScreen"],s.directions=["left","right","up","down","center"]})(y||(y={}));const{keyboard:K,focusState:F,mouse:P}=y;class L extends HTMLElement{#e;#s=0;#t;onEnd=()=>{};constructor(){super(),this.#t=this.innerText,this.innerText="",this.#e=setInterval(this.#i.bind(this),1e3/30)}#i(){this.innerText+=this.#t[this.#s++]??"",this.#s>=this.#t.length&&(this.onEnd(),clearInterval(this.#e))}}customElements.define("i-typing",L);document.addEventListener("DOMContentLoaded",async()=>{y.init();const{SceneTitle:s}=await E(async()=>{const{SceneTitle:e}=await import("./assets/SceneTitle-CfKAw6Ee.js").then(t=>t.a);return{SceneTitle:e}},[],import.meta.url);S.init(new s)});export{y as I,S,E as _,K as k};
//# sourceMappingURL=run.js.map
